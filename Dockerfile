FROM golang:1.9

MAINTAINER jeffchanjunwei@163.com

COPY ./calico-apiserver  /

ENV FELIX_IPV6SUPPORT false
ENV KUBERNETES_SERVICE_PORT 443
ENV KUBERNETES_PORT tcp://10.233.0.1:443
ENV HOSTNAME paasm1
ENV SHLVL 1
ENV KUBEDNS_PORT_53_TCP_ADDR 10.233.0.3
ENV HOME /root
ENV KUBEDNS_PORT_53_UDP_ADDR 10.233.0.3
ENV CLUSTER_TYPE k8s,bgp
ENV KUBEDNS_PORT_53_TCP_PORT 53
ENV KUBEDNS_PORT_53_TCP_PROTO tcp
ENV KUBEDNS_PORT_53_UDP_PORT 53
ENV CALICO_IPV4POOL_CIDR 10.234.64.0/18
ENV CALICO_DISABLE_FILE_LOGGING true
ENV KUBEDNS_SERVICE_PORT_DNS 53
ENV KUBEDNS_PORT_53_UDP_PROTO udp
ENV FELIX_LOGSEVERITYSCREEN info
ENV KUBEDNS_PORT_53_TCP tcp://10.233.0.3:53
ENV FELIX_DEFAULTENDPOINTTOHOSTACTION ACCEPT
ENV KUBERNETES_PORT_443_TCP_ADDR 10.233.0.1
ENV KUBEDNS_PORT_53_UDP udp://10.233.0.3:53
ENV ETCD_CA_CERT_FILE /calico-secrets/etcd-ca
ENV PATH /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
ENV KUBERNETES_PORT_443_TCP_PORT 443
ENV KUBERNETES_PORT_443_TCP_PROTO tcp
ENV FELIX_HEALTHENABLED true
ENV KUBEDNS_SERVICE_PORT_DNS_TCP 53
ENV CALICO_IPV4POOL_IPIP always
ENV ETCD_CERT_FILE /calico-secrets/etcd-cert
ENV CALICO_NETWORKING_BACKEND bird
ENV DOCKER_API_VERSION 1.21
ENV KUBEDNS_SERVICE_HOST 10.233.0.3
ENV KUBERNETES_SERVICE_PORT_HTTPS 443
ENV KUBERNETES_PORT_443_TCP tcp://10.233.0.1:443
ENV FELIX_IPINIPMTU 1440
ENV PWD /
ENV KUBERNETES_SERVICE_HOST 10.233.0.1
ENV ETCD_ENDPOINTS https://10.142.21.224:2379
ENV ETCD_KEY_FILE /calico-secrets/etcd-key
ENV KUBEDNS_PORT udp://10.233.0.3:53
ENV KUBEDNS_SERVICE_PORT 53

CMD ['/calico-apiserver']
